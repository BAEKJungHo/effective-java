# 상속보다는 컴포지션을 사용하라

상속은 반드시 하위 클래스가 상위 클래스의 `진짜` 하위 타입인 상황에서만 쓰여야 한다. 즉, is-a 관계일 때만 상속해야 한다.

자바 플랫폼 라이브러리에서도 이 원칙을 명백히 위반한 클래스들을 찾아볼 수 있다. 예를 들어, 스택은 벡터가 아니므로 Stack 은 Vector 를 확장해서는 안 됐다. 또한 속성 목록도 해시테이블이 아니므로
Properties 도 Hashtable 을 확장해서는 안 됐다.

컴포지션을 써야 할 상황에서 상속을 사용하는 건 내부 구현을 불필요하게 노출하는 꼴이다. 그 결과 API 가 내부 구현에 묶이고 그 클래스의 성능도 영원히 제한된다. 더 심각한 문제는 
클라이언트가 노출된 내부에 직접 접근할 수 있다는 것이다.

컴포지션 대신 상속을 사용하기로 결정하기 전에 마지막으로 자문해야 할 질문을 소개한다.

1. 확장하려는 클래스의 API 에 아무런 결함이 없는가?
2. 결함이 있다면, 이 결함이 여러분 클래스의 API 까지 전파돼도 괜찮은가?

컴포지션으로는 이런 결함을 숨기는 새로운 API 를 설계할 수 있지만, 상속은 상위 클래스의 API 를 `그 결함까지도` 그대로 승계한다.
