# 제네릭과 가변인수를 함께 쓸 때는 신중하라

__가변인수(varargs) 메서드와 제네릭은 자바 5 때 함께 추가되었지만 서로 잘 어우러지지는 않는다.__

가변인수 메서드를 호출하면 가변인수를 담기 위한 배열이 자동으로 하나 만들어진다. 그런데 내부로 감춰야 했을 이 배열을 그만 클라이언트에 노출하는 문제가 생겼다.
그 결과 varargs 매개변수에 제네릭이나 매개변수화 타입이 포함되면 알기 어려운 컴파일 경고가 발생한다.

자바 7에서는 `@SafeVarargs` 어노테이션이 추가되어 제네릭 가변인수 메서드 작성자가 클라이언트 측에서 발생하는 경고를 숨길 수 있게 되었다. 

__@SafeVarargs 어노테이션은 메서드 작성자가 그 메서드가 타입 안전함을 보장하는 장치다.__

## 제네릭 가변인수 메서드가 안전한지 판단하는 기준

가변인수 메서드를 호출할 때 varargs 매개변수를 담는 제네릭 배열이 만들어 진다.

메서드가 이 `배열에 아무것도 저장하지 않고`(매개변수들을 덮어쓰지 않고) 그 `배열의 참조가 밖으로 노출되지 않는다면` 그 메서드는 안전하다.

- 자신의 참조를 노출 - 안전하지 않다!

```java
static <T> T[] toArray(T... args) {
  return args;
}
```
  
